import{preloadImages}from"../../libs/utils.js";$=jQuery;let lenis=new Lenis;function customDropdown(){let e=document.querySelectorAll(".dropdown-custom");function n(r){e.forEach(e=>{var t=e.querySelector(".dropdown-custom-menu"),o=e.querySelector(".dropdown-custom-btn");r&&e===r||(t.classList.remove("dropdown--active"),o.classList.remove("--active"))})}e.forEach(t=>{let o=t.querySelector(".dropdown-custom-btn"),r=t.querySelector(".dropdown-custom-menu");var e=t.querySelectorAll(".dropdown-custom-item");let a=t.querySelector(".value-select");o.addEventListener("click",function(e){e.stopPropagation(),n(t),r.classList.toggle("dropdown--active"),o.classList.toggle("--active")}),document.addEventListener("click",function(){n()}),e.forEach(r=>{r.addEventListener("click",function(e){e.stopPropagation();var e=a.querySelector("img").src,t=a.querySelector("span").textContent,o=(a.innerHTML,r.innerHTML);a.innerHTML=o,r.innerHTML=`<img src="${e}" alt="" /><span>${t}</span>`,n()})}),window.addEventListener("scroll",function(){n()})})}function marquee(){document.querySelectorAll(".marquee-container").forEach(e=>{let t=e.querySelector(".marquee-content");var o=[...e.querySelectorAll(".marquee-item")],r=parseFloat(e.getAttribute("data-speed"))||50,a=(t.innerHTML="",o.forEach(e=>t.appendChild(e.cloneNode(!0))),[...t.children]);let n=0;a.forEach(e=>n+=e.offsetWidth);var o=e.offsetWidth,i=Math.ceil(o/n)+2;for(let e=0;e<i;e++)a.forEach(e=>{t.appendChild(e.cloneNode(!0))});let l=0,s=([...t.children].forEach(e=>l+=e.offsetWidth),gsap.set(t,{x:0,willChange:"transform",force3D:!0}),gsap.timeline({repeat:-1}));s.to(t,{x:-l,duration:l/r,ease:"none",modifiers:{x:e=>parseFloat(e)%l+"px"}}),!parseFloat(e.getAttribute("hover-pause"))&&1||(e.addEventListener("mouseenter",()=>s.pause()),e.addEventListener("mouseleave",()=>s.resume()))})}function intro(){document.querySelector(".intro").length<1||gsap.timeline({defaults:{duration:2,ease:"power2.inOut"}}).fromTo(".intro",{clipPath:"inset(0% 0% 0% 0%)"},{clipPath:"inset(0% 0% 100% 0%)",onComplete:()=>{document.querySelector(".intro").classList.add("d-none")}})}function itemParallax(){$(".js-parallax").length<1&&$(".image-parallax").length<1||(gsap.utils.toArray(".js-parallax").forEach(e=>{var t=parseFloat(e.getAttribute("data-y"))||100,o=e.getAttribute("data-direction")||"up";gsap.fromTo(e,{y:"down"===o?-t:t},{y:0,scrollTrigger:{trigger:e,start:"top bottom",end:"bottom top",scrub:1,ease:"power4",delay:.2}})}),document.querySelectorAll(".image-parallax").forEach(e=>{var t=e.querySelector("img, video");t&&(gsap.set(t,{yPercent:10}),gsap.to(t,{yPercent:-10,ease:"none",scrollTrigger:{trigger:e,start:"top 80%",end:"bottom top",scrub:!0}}))}))}function sectionOffers(){var e;$(".section-offers").length<1||(e=$(".section-offers .list-item li")).length<1||(console.log(e),e.on("mouseenter",function(){var e=$(this).data("tab");$(`.section-offers .list-item__image .image[data-tab="${e}"]`).addClass("--active")}),e.on("mouseleave",function(){var e=$(this).data("tab");$(`.section-offers .list-item__image .image[data-tab="${e}"]`).removeClass("--active")}))}lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>{lenis.raf(1e3*e)}),gsap.ticker.lagSmoothing(0);let init=()=>{gsap.registerPlugin(ScrollTrigger),customDropdown(),marquee(),intro(),itemParallax(),sectionOffers()},isLinkClicked=(preloadImages("img").then(()=>{init()}),!1);$("a").on("click",function(e){!this.href||this.href.match(/^#/)||this.href.match(/^javascript:/)||(isLinkClicked=!0)}),$(window).on("beforeunload",function(){isLinkClicked||$(window).scrollTop(0),isLinkClicked=!1});