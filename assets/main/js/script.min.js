import{preloadImages}from"../../libs/utils.js";$=jQuery;let lenis=new Lenis;function customDropdown(){let e=document.querySelectorAll(".dropdown-custom");function i(a){e.forEach(e=>{var t=e.querySelector(".dropdown-custom-menu"),r=e.querySelector(".dropdown-custom-btn");a&&e===a||(t.classList.remove("dropdown--active"),r.classList.remove("--active"))})}e.forEach(t=>{let r=t.querySelector(".dropdown-custom-btn"),a=t.querySelector(".dropdown-custom-menu");var e=t.querySelectorAll(".dropdown-custom-item");let o=t.querySelector(".value-select");r.addEventListener("click",function(e){e.stopPropagation(),i(t),a.classList.toggle("dropdown--active"),r.classList.toggle("--active")}),document.addEventListener("click",function(){i()}),e.forEach(a=>{a.addEventListener("click",function(e){e.stopPropagation();var e=o.querySelector("img"),e=e?e.src:"",t=o.querySelector("span").textContent,r=(o.innerHTML,a.innerHTML);o.innerHTML=r,a.innerHTML=e?`<img src="${e}" alt="" /><span>${t}</span>`:`<span>${t}</span>`,i()})}),window.addEventListener("scroll",function(){a.closest(".header-lang")&&(a.classList.remove("dropdown--active"),r.classList.remove("--active"))})})}function marquee(){document.querySelectorAll(".marquee-container").forEach(e=>{let t=e.querySelector(".marquee-content");var r=[...e.querySelectorAll(".marquee-item")],a=parseFloat(e.getAttribute("data-speed"))||50,o=(t.innerHTML="",r.forEach(e=>t.appendChild(e.cloneNode(!0))),[...t.children]);let i=0;o.forEach(e=>i+=e.offsetWidth);var r=e.offsetWidth,n=Math.ceil(r/i)+2;for(let e=0;e<n;e++)o.forEach(e=>{t.appendChild(e.cloneNode(!0))});let s=0,l=([...t.children].forEach(e=>s+=e.offsetWidth),gsap.set(t,{x:0,willChange:"transform",force3D:!0}),gsap.timeline({repeat:-1}));l.to(t,{x:-s,duration:s/a,ease:"none",modifiers:{x:e=>parseFloat(e)%s+"px"}}),!parseFloat(e.getAttribute("hover-pause"))&&1||(e.addEventListener("mouseenter",()=>l.pause()),e.addEventListener("mouseleave",()=>l.resume()))})}function intro(){var e;document.querySelector(".intro").length<1||(e=gsap.timeline({defaults:{duration:2,ease:"power2.inOut"}}),gsap.delayedCall(1,()=>{gsap.registerPlugin(ScrollTrigger,SplitText);let a=gsap.timeline(),o=gsap.utils.toArray(".data-fade-in-auto");0<o.length&&o.forEach((e,t)=>{a.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{opacity:1,y:0,duration:.5,ease:"sine.out",onStart:()=>{gsap.set(e,{opacity:1})}},.1*t)});var e=document.querySelectorAll(".effect-blur-auto");0<e.length&&e.forEach((e,t)=>{var r=SplitText.create(e,{type:"words, chars",charsClass:"split-char"}),t=0<o.length?.1*o.length+.3+.2*t:.2*t;a.fromTo(r.chars,{filter:"blur(5px)",y:10,willChange:"filter, transform",opacity:0},{ease:"none",filter:"blur(0px)",y:0,stagger:.025,opacity:1,duration:.6,onStart:()=>{gsap.set(e,{opacity:1})}},t)}),a.call(()=>{gsap.utils.toArray(".data-fade-in-auto, .effect-blur-auto").forEach(e=>{gsap.set(e,{willChange:"auto"})})})}),e.fromTo(".intro",{clipPath:"inset(0% 0% 0% 0%)"},{clipPath:"inset(0% 0% 100% 0%)",onComplete:()=>{document.querySelector(".intro").classList.add("d-none")}}))}function itemEffect(){$(".js-parallax").length<1&&$(".image-parallax").length<1&&$(".image-fade-in").length<1||(gsap.utils.toArray(".js-parallax").forEach(e=>{var t=parseFloat(e.getAttribute("data-y"))||100,r=e.getAttribute("data-direction")||"up";gsap.fromTo(e,{y:"down"===r?-t:t},{y:0,scrollTrigger:{trigger:e,start:"top bottom",end:"bottom top",scrub:1,ease:"power4",delay:.2}})}),document.querySelectorAll(".image-parallax").forEach(e=>{var t=e.querySelector("img, video");t&&(gsap.set(t,{yPercent:10}),gsap.to(t,{yPercent:-10,ease:"none",scrollTrigger:{trigger:e,start:"top 80%",end:"bottom top",scrub:!0}}))}),gsap.utils.toArray(".image-fade-in").forEach(e=>{gsap.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:40},{scrollTrigger:{trigger:e,start:"top 90%",end:"bottom 90%"},opacity:1,y:0,duration:.7,ease:"sine.out"})}))}function sectionOffers(){var e;$(".section-offers").length<1||(e=$(".section-offers .list-item a")).length<1||(e.on("mouseenter",function(){var e=$(this).data("tab");$(`.section-offers .list-item__image .image[data-tab="${e}"]`).addClass("--active")}),e.on("mouseleave",function(){var e=$(this).data("tab");$(`.section-offers .list-item__image .image[data-tab="${e}"]`).removeClass("--active")}))}function bookingForm(){$(".booking-form form").length<1||$(".booking-form form").each(function(){let r=$(this),t=r.find("input[name='date']")[0];t&&new Lightpick({field:t,singleDate:!0,numberOfMonths:1,format:"DD/MM/YYYY",minDate:moment(),onSelect:function(e){e&&(t.value=e.format("DD/MM/YYYY"),t.classList.remove("error"))}}),r.on("submit",function(e){e.preventDefault();let t=!0;r.find(".field").removeClass("error");e=r.find("input[name='date']").val().trim(),e||(r.find("input[name='date']").closest(".field").addClass("error"),t=!1),e=r.find(".dropdown-custom-btn[name='time'] .value-select span").text().trim(),e&&"Time"!==e||(r.find(".dropdown-custom-btn[name='time']").closest(".field").addClass("error"),t=!1),e=r.find("input[name='adult']").val().trim(),r.find("input[name='child']").val().trim(),e||(r.find("input[name='adult']").closest(".field").addClass("error"),t=!1),e=r.find("input[name='fullname']").val().trim(),e||(r.find("input[name='fullname']").closest(".field").addClass("error"),t=!1),e=r.find("input[name='email']").val().trim(),e&&/^\S+@\S+\.\S+$/.test(e)||(r.find("input[name='email']").closest(".field").addClass("error"),t=!1),e=r.find("input[name='phone']").val().trim();e||(r.find("input[name='phone']").closest(".field").addClass("error"),t=!1),r.find("textarea[name='message']").val().trim();t&&(r.find("button[type='submit']").addClass("aloading"),setTimeout(()=>{r.find("button[type='submit']").removeClass("aloading"),r[0].reset(),r.closest(".booking-form__inner").addClass("success"),setTimeout(()=>{r.closest(".booking-form__inner").removeClass("success")},1e4)},3e3))})})}function CTA(){document.querySelector(".cta").length<1||ScrollTrigger.create({start:"top+=100vh top",end:99999,paused:!0,onUpdate:e=>{1===e.direction?document.querySelector(".cta").classList.add("hide"):document.querySelector(".cta").classList.remove("hide")}})}function hero(){document.querySelectorAll(".swiper-hero").forEach(e=>{new Swiper(e,{slidesPerView:1,watchSlidesProgress:!0,speed:1500,loop:!0,autoplay:{delay:3e3},on:{progress(r){r.slides.forEach(e=>{var t=(e.progress||0)*(.95*r.width),e=e.querySelector(".hero-box");e&&!isNaN(t)&&(e.style.transform=`translate3d(${t}px, 0, 0)`)})},touchStart(e){e.slides.forEach(e=>{e.style.transition=""})},setTransition(e,t){let r="cubic-bezier(0.25, 0.1, 0.25, 1)";e.slides.forEach(e=>{e.style.transition=t+"ms "+r;e=e.querySelector(".hero-box");e&&(e.style.transition=t+"ms "+r)})}}})})}function effectText(){gsap.registerPlugin(ScrollTrigger,SplitText),gsap.utils.toArray(".data-fade-in").forEach(e=>{gsap.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{scrollTrigger:{trigger:e,start:"top 90%",end:"bottom 90%"},opacity:1,y:0,duration:.5,ease:"sine.out"})}),document.querySelectorAll(".effect-blur").forEach(e=>{var t=SplitText.create(e,{type:"words, chars",charsClass:"split-char"});gsap.fromTo(t.chars,{filter:"blur(5px) ",y:10,willChange:"filter, transform",opacity:0},{ease:"none",filter:"blur(0px)",y:0,stagger:.005,opacity:1,scrollTrigger:{trigger:e,start:"top 80%"}})})}function headerMobile(){if(!(991<window.innerWidth)){var r=document.querySelector(".header-hambuger.open"),a=document.querySelector(".header-hambuger.close");let e=document.querySelector(".header-overlay");var o=document.querySelector(".header-overlay-main > ul > li.menu-item-has-children > a");let t=document.querySelector(".header-overlay-main > ul > li.menu-item-has-children > .sub-menu");var i=document.querySelector(".header-overlay-main .menu-back");r.addEventListener("click",()=>{e.classList.add("active")}),a.addEventListener("click",()=>{setTimeout(()=>{e.classList.remove("active"),t.classList.remove("active")},300)}),o.addEventListener("click",e=>{e.preventDefault(),console.log("click"),t.classList.add("active")}),i.addEventListener("click",()=>{t.classList.remove("active")})}}lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>{lenis.raf(1e3*e)}),gsap.ticker.lagSmoothing(0);let init=()=>{gsap.registerPlugin(ScrollTrigger),customDropdown(),marquee(),intro(),CTA(),itemEffect(),sectionOffers(),bookingForm(),hero(),effectText(),headerMobile()},isLinkClicked=(preloadImages("img").then(()=>{init()}),!1);$("a").on("click",function(e){!this.href||this.href.match(/^#/)||this.href.match(/^javascript:/)||(isLinkClicked=!0)}),$(window).on("beforeunload",function(){isLinkClicked||$(window).scrollTop(0),isLinkClicked=!1});